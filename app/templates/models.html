{% extends "base.html" %}

{% block title %}Models - Multiverse Gateway{% endblock %}

{% block content %}
<div x-data="modelsData()" x-init="loadModels()">
    <div class="mb-8">
        <h2 class="text-3xl font-bold text-gray-900">Available Models</h2>
        <p class="mt-2 text-sm text-gray-600">Browse all models with healthy servers</p>
    </div>

    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        <template x-for="model in models" :key="model.id">
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <h3 class="text-lg font-medium text-gray-900" x-text="model.id"></h3>
                    <p class="mt-1 text-sm text-gray-500">Available servers: <span x-text="model.server_count"></span></p>
                    <div class="mt-4">
                        <a :href="'/test?model=' + model.id" class="text-indigo-600 hover:text-indigo-900 text-sm font-medium">
                            Test this model â†’
                        </a>
                    </div>
                </div>
            </div>
        </template>
    </div>
</div>

<script>
function modelsData() {
    return {
        models: [],
        async loadModels() {
            try {
                const response = await api.get('/v1/models');
                this.models = response.data.map(m => ({ ...m, server_count: 1 }));
            } catch (error) {
                toast.error('Failed to load models');
            }
        }
    };
}
</script>
{% endblock %}

